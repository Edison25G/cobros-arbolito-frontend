<div class="card shadow-md border-0 rounded-lg">
	<div class="flex items-center justify-between gap-4 mb-5 p-4 bg-gray-50 rounded-t-lg">
		<div>
			<h2 class="text-2xl font-semibold text-gray-800">Gestión de Medidores</h2>
			<p class="text-sm text-gray-500">Administra el inventario de medidores del sistema.</p>
		</div>
		<p-button (click)="crearMedidor()" label="Nuevo Medidor" icon="pi pi-plus" styleClass="p-button-success"></p-button>
	</div>

	<p-table
		[value]="medidores"
		[loading]="isLoading"
		[paginator]="true"
		[rows]="10"
		styleClass="p-datatable-striped"
		responsiveLayout="scroll"
	>
		<ng-template pTemplate="header">
			<tr>
				<th pSortableColumn="codigo">Código <p-sortIcon field="codigo"></p-sortIcon></th>
				<th pSortableColumn="marca">Marca <p-sortIcon field="marca"></p-sortIcon></th>
				<th pSortableColumn="estado">Estado <p-sortIcon field="estado"></p-sortIcon></th>
				<th pSortableColumn="nombreSocioAsignado">Asignado a <p-sortIcon field="nombreSocioAsignado"></p-sortIcon></th>
				<th class="text-center">Acciones</th>
			</tr>
		</ng-template>

		<ng-template pTemplate="body" let-medidor>
			<tr>
				<td>
					<span class="font-medium text-gray-700">{{ medidor.codigo }}</span>
				</td>
				<td>{{ medidor.marca }}</td>
				<p-tag [severity]="getSeverity(medidor.estado)" [value]="medidor.estado"> </p-tag>

				<td>
					{{ medidor.nombreSocioAsignado || '---' }}
				</td>
				<td>
					<div class="flex justify-center gap-2">
						<p-button
							*ngIf="medidor.estado === EstadoMedidor.EnBodega"
							pButton
							pRipple
							pTooltip="Asignar a socio"
							tooltipPosition="top"
							(click)="asignarSocio(medidor)"
							icon="pi pi-user-plus"
							class="p-button-rounded p-button-text p-button-success"
						></p-button>

						<p-button
							pButton
							pRipple
							pTooltip="Editar medidor"
							tooltipPosition="top"
							(click)="editarMedidor(medidor)"
							icon="pi pi-pencil"
							class="p-button-rounded p-button-text p-button-warning"
						></p-button>
					</div>
				</td>
			</tr>
		</ng-template>

		<ng-template pTemplate="emptymessage">
			<tr>
				<td colspan="5" class="text-center">No se encontraron medidores.</td>
			</tr>
		</ng-template>
	</p-table>
</div>
