<div *ngIf="userRole === Role.Admin || userRole === Role.Secretario; else socioView">
	<h2 class="text-2xl font-semibold text-gray-800 mb-4">Resumen del Sistema</h2>

	<div class="grid grid-cols-1 lg:grid-cols-4 gap-5">
		<ng-container *ngIf="isLoading">
			<p-skeleton height="9rem" styleClass="card shadow-md border-0 rounded-lg lg:col-span-1"></p-skeleton>
			<p-skeleton height="9rem" styleClass="card shadow-md border-0 rounded-lg lg:col-span-1"></p-skeleton>
			<p-skeleton height="9rem" styleClass="card shadow-md border-0 rounded-lg lg:col-span-1"></p-skeleton>
			<p-skeleton height="9rem" styleClass="card shadow-md border-0 rounded-lg lg:col-span-1"></p-skeleton>
			<div class="lg:col-span-4">
				<p-skeleton height="24rem" styleClass="card shadow-md border-0 rounded-lg"></p-skeleton>
			</div>
		</ng-container>

		<ng-container *ngIf="!isLoading && reporteData">
			<p-card styleClass="shadow-md border-0 rounded-lg lg:col-span-1">
				<div class="flex items-center gap-4">
					<i class="pi pi-users text-3xl text-blue-500 p-3 bg-blue-100 rounded-full"></i>
					<div>
						<span class="text-sm text-gray-500">Socios Activos</span>
						<p class="text-2xl font-bold text-gray-800">{{ reporteData.sociosActivos }}</p>
					</div>
				</div>
			</p-card>

			<p-card styleClass="shadow-md border-0 rounded-lg lg:col-span-1">
				<div class="flex items-center gap-4">
					<i class="pi pi-exclamation-triangle text-3xl text-red-500 p-3 bg-red-100 rounded-full"></i>
					<div>
						<span class="text-sm text-gray-500">Socios en Mora</span>
						<p class="text-2xl font-bold text-gray-800">{{ reporteData.sociosEnMora }}</p>
					</div>
				</div>
			</p-card>

			<p-card styleClass="shadow-md border-0 rounded-lg lg:col-span-1">
				<div class="flex items-center gap-4">
					<i class="pi pi-dollar text-3xl text-green-500 p-3 bg-green-100 rounded-full"></i>
					<div>
						<span class="text-sm text-gray-500">Recaudado (Mes)</span>
						<p class="text-2xl font-bold text-gray-800">
							{{ reporteData.totalRecaudadoMes | currency: 'USD' }}
						</p>
					</div>
				</div>
			</p-card>

			<p-card styleClass="shadow-md border-0 rounded-lg lg:col-span-1">
				<div class="flex items-center gap-4">
					<i class="pi pi-wallet text-3xl text-orange-500 p-3 bg-orange-100 rounded-full"></i>
					<div>
						<span class="text-sm text-gray-500">Deuda Total</span>
						<p class="text-2xl font-bold text-gray-800">
							{{ reporteData.totalDeuda | currency: 'USD' }}
						</p>
					</div>
				</div>
			</p-card>

			<div class="lg:col-span-4">
				<div class="card shadow-md border-0 rounded-lg p-5">
					<h3 class="text-lg font-semibold text-gray-700 mb-3">Recaudación (Últimos 6 Meses)</h3>
					<p-chart
						*ngIf="barChartData"
						type="bar"
						[data]="barChartData"
						[options]="barChartOptions"
						height="24rem"
					></p-chart>
				</div>
			</div>
		</ng-container>
	</div>
</div>

<ng-template #socioView>
	<div class="card shadow-md border-0 rounded-lg p-6 bg-gradient-to-r from-emerald-500 to-green-600 text-white">
		<h2 class="text-3xl font-bold mb-2">¡Bienvenido!</h2>
		<p class="text-lg text-green-100 mb-6">Aquí tienes un resumen de tu cuenta.</p>

		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
			<a routerLink="/dashboard/pagos" class="block">
				<div class="p-5 bg-white/30 backdrop-blur-sm rounded-lg hover:bg-white/40 transition-colors duration-200">
					<div class="flex items-center gap-4">
						<i class="pi pi-dollar text-4xl text-white"></i>
						<div>
							<h3 class="text-xl font-semibold text-white">Mis Pagos</h3>
							<p class="text-sm text-green-50">Ver mi historial de facturas y pagos.</p>
						</div>
					</div>
				</div>
			</a>
			<a routerLink="/dashboard/medidor" class="block">
				<div class="p-5 bg-white/30 backdrop-blur-sm rounded-lg hover:bg-white/40 transition-colors duration-200">
					<div class="flex items-center gap-4">
						<i class="pi pi-chart-line text-4xl text-white"></i>
						<div>
							<h3 class="text-xl font-semibold text-white">Mi Medidor</h3>
							<p class="text-sm text-green-50">Consultar mi historial de lecturas.</p>
						</div>
					</div>
				</div>
			</a>
		</div>
	</div>
</ng-template>
